#HTTPS server

events {
    
}

http {
    server {
        
        listen      8080;
        server_name localhost;

        # add Strict-Transport-Security to prevent main in the middle attacks
        #add_header Strict-Transport-Security "max-age=31536000";

        # SSL CONFIGURATION HERE

        # Redirects 404 errors to pageNotFound.html without allowing the request to get to proxy_pass
        # error_page 404 /pageNotFound.html

        # enable compression of large server responses
        gzip on;
        gzip_vary on;
        gzip_min_length 10240;
        gzip_proxied any;
        gzip_types text/plain text/css text/xml text/javascript application/x-javascript application/xml application/javascript;
        gzip_disable "MSIE [1-6]\.";

        # Handle all requests that's criteria don't match any other location blocks by redirecting to the redirect engine
        location / {
            # Deny all methods except GET and POST
            limit_except GET POST {
                deny all;
            }
            proxy_pass http://127.0.0.1:5000/?host=$host&uri=$request_uri;
            proxy_set_header X-Real-IP $remote_addr;
        }
    }
}